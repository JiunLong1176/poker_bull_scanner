<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Prevent user scaling/zooming entirely -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Poker Bull Scanner</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div class="container">
        <header>
            <h1>Poker Bull Scanner</h1>
        </header>
        
        <nav class="mode-switcher">
            <button id="mode-manual" class="mode-btn active">Manual Input</button>
            <button id="mode-scan" class="mode-btn">Scanner</button>
        </nav>

        <main id="manual-view">
            <div class="manual-container">
                <h2>Select 5 Cards</h2>
                <div class="selected-cards">
                    <div class="card-slot" data-index="0"></div>
                    <div class="card-slot" data-index="1"></div>
                    <div class="card-slot" data-index="2"></div>
                    <div class="card-slot" data-index="3"></div>
                    <div class="card-slot" data-index="4"></div>
                </div>
                
                <div class="keyboard">
                    <div class="keyboard-grid">
                        <button class="key-btn" data-val="A">A</button>
                        <button class="key-btn" data-val="2">2</button>
                        <button class="key-btn" data-val="3">3</button>
                        <button class="key-btn" data-val="4">4</button>
                        
                        <button class="key-btn" data-val="5">5</button>
                        <button class="key-btn" data-val="6">6</button>
                        <button class="key-btn" data-val="7">7</button>
                        <button class="key-btn" data-val="8">8</button>
                        
                        <button class="key-btn" data-val="9">9</button>
                        <button class="key-btn" data-val="10">10</button>
                        <button class="key-btn" data-val="J">J</button>
                        <button class="key-btn" data-val="Q">Q</button>
                        
                        <button class="key-btn" data-val="K">K</button>
                        <button class="key-btn action-btn" id="del-btn">DEL</button>
                        <button class="key-btn clear-all-btn span-2" id="clear-all-btn">CLEAR ALL</button>
                    </div>
                </div>

                <button id="manual-submit-btn" class="submit-btn" disabled>Calculate Bull</button>
            </div>
        </main>

        <main id="scanner-view" class="hidden">
            <div class="camera-container">
                <video id="camera-stream" autoplay playsinline></video>
                <canvas id="capture-canvas" style="display:none;"></canvas>
                
                <div class="camera-overlay">
                    <div class="scan-area"></div>
                    <p class="scan-instruction">Align cards within the box</p>
                </div>

                <div id="camera-error" class="overlay-message hidden">
                    <p>Camera access required.</p>
                    <button id="retry-camera" style="margin-top:10px; padding:8px 16px;">Retry</button>
                </div>
            </div>
            
            <div class="controls">
                <!-- Hidden file input -->
                <input type="file" id="file-upload" accept="image/*" style="display: none;">
                
                <!-- Left-side auxiliary button container -->
                <div class="control-left" style="position: absolute; left: 30px;">
                    <button id="upload-btn" class="icon-btn" aria-label="Upload Image">
                        ðŸ“· <!-- Using emoji as icon for simplicity -->
                    </button>
                </div>

                <button id="scan-btn" class="btn" aria-label="Scan Cards">
                    <div class="btn-inner"></div>
                </button>
            </div>
        </main>

        <!-- Shared Components -->
        <div id="loading" class="hidden">
            <div class="spinner"></div>
            <p>Analyzing...</p>
        </div>

        <div id="result-container" class="hidden">
            <h2>
                Result
                <button id="close-results">&times;</button>
            </h2>
            <div id="cards-detected" class="card-display"></div>
            <div id="final-result" class="bull-result"></div>
            <div id="bull-calculation" class="bull-details"></div>
        </div>
    </div>

    <!-- Tesseract removed in favor of Roboflow -->
    <script src="https://cdn.jsdelivr.net/npm/inferencejs@1.0.11"></script>
    <script src="app.js"></script>
</body>
</html>
